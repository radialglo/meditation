function query(a){"use strict";var e="https://api.instagram.com/v1/tags/"+settings.default_tag+"/media/recent?callback=?&count="+settings.count;$.getJSON(e,{access_token:settings.instagram_token},a)}function load_images(){"use strict";$("#loader").show(),query(function(a){if(200!==a.meta.code)throw new Error("Error"+a.meta.code);var e=[],i=a.data;for(var t in i)if(i.hasOwnProperty(t)){var s=i[t];e.push(s.images.thumbnail.url)}null==game?game=new Meditation("board",mode,e):game.restart(e)})}function reload(){"use strict";$("#overlay").fadeOut(load_images)}function preload(){"use strict";query(function(a){if(200!==a.meta.code)throw new Error("Error"+a.meta.code);var e=a.data;for(var i in e)if(e.hasOwnProperty(i)){var t=e[i];$("<img/>")[0].src=t.images.thumbnail.url}})}function playSomeMusic(){"use strict";SC.oEmbed("https://soundcloud.com/olafur-arnalds",{maxheight:395,auto_play:!0,color:"01a2ff"},document.getElementById("music"))}function intro(){"use strict";$("#overlay").append('<div id="game-intro">Welcome! Meditation is a spin on the classic game of <a href="http://en.wikipedia.org/wiki/Concentration_(game)" target="_blank">Concentration</a>.  Match pairs of Instagram photos of the Japanese garden, <a href="http://en.wikipedia.org/wiki/Sankei-en" target="_blank">Sankei-en</a>, while listening to beautiful pieces composed by the post-classical musician, <a href="https://soundcloud.com/olafur-arnalds" target="_blank">Olafur Arnalds</a>. Time to relax.<hr/><div class="card_frame">Back face:<div class="holder"><div class="card"><div class="front face carbon_fibre"></div><img src="http://distilleryimage7.s3.amazonaws.com/f113510439ce11e28a7322000a1fa414_5.jpg" class="back face"></div></div></div><div class="card_frame">Front face:<div class="holder done"><div class="card"><div class="front face carbon_fibre"></div><img src="http://distilleryimage7.s3.amazonaws.com/f113510439ce11e28a7322000a1fa414_5.jpg" class="back face"></div></div></div><div style="display: inline-block;border-left: 1px solid #CCC;height: 130px;width: 210px;padding: 0 10px;text-indent: 0;"><strong>Game Play:</strong><br/>Cards start face down and clicking on a card will flip it over. Game ends when all cards have been matched.</div><hr /><h3 style>Select Game Mode</h3><ul><li class="game_mode"><ul><li><input id="m1" name="mode" type="radio"/> Single Player</li><li>Race against time.</li></ul></li><li class="game_mode"><ul><li><input id="m2" name="mode" type="radio"/> Two Player</li><li>Play against a friend.</li><li>Match a pair and go again.</li><li>Most pairs win.</li></ul></li></ul><div class="clearfix"></div><hr/><i class="icon-play-circle2" title="play"></i></div>')}var settings={instagram_token:"271434636.1a79b15.9cab33e1a24547d3ae9623253881652c",sc_token:"0832d7b6bacfb836dafac90b0365b3f6",count:200,default_tag:"Sankeien"},game=null,mode;$(document).ready(function(){"use strict";preload(),intro(),SC.initialize({client_id:settings.sc_token}),playSomeMusic(),document.onclick=function(a){a=a||window.event;var e=a.target||a.srcElement;if(e.id)switch(e.id){case"m1":mode="single-player";break;case"m2":mode="two-player"}else switch(e.className){case"icon-play-circle2":reload();break;case"icon-cancel close":$(e).parent().fadeOut(function(){$("#overlay").fadeOut()})}$(".active").hide().removeClass("active")};var a=$(".flyout");a.hide(),$("nav").on("click","i",function(e){var i=$(this).parent().index(),t=$(a[i]);t.is(".active")?t.hide().removeClass("active"):($(".active").hide().removeClass("active"),t.addClass("active").show()),e.stopPropagation()}),$(".flyout").click(function(a){a=a||window.event;var e=a.target||a.srcElement;if(e.id)switch(e.id){case"mode-1":game.settings.set_single_player();break;case"mode-2":game.settings.set_two_player()}else switch(e.className){case"icon-cw":reload()}a.stopPropagation()}),$("#color_settings").on("click","li",function(){game.settings.set_card_background($(this).attr("class"))}),$("#m1").click()});